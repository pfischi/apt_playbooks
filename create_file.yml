- name: Create File
  hosts: '{{ host }}'
  tasks:

    - name: create file with text content
      ansible.builtin.copy:
        content: {{ content | b64decode }}
        dest: "{{ file_path }}"
        owner: "{{ owner | default(omit) }}"
        group: "{{ group | default(omit) }}"
        mode: "{{ permissions | default(omit) }}"
      when:
        - {{ base64Content }} is undefined

    - name: create file with text content
      ansible.builtin.copy:
        content: {{ content }}
        dest: "{{ file_path }}"
        owner: "{{ owner | default(omit) }}"
        group: "{{ group | default(omit) }}"
        mode: "{{ permissions | default(omit) }}"
      when:
        - {{ base64Content }} is defined
        - {{ base64Content }} | bool
        - {{ base64Content }} == true
